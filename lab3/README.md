# Лабораторная работа 3 - Программирование ПЛИС

## Описание

Данная лабораторная работа включает в себя:
1. Анализ временных диаграмм и разработка соответствующих схем
2. Разработку продвинутого таймера на основе конечного автомата (FSM)

## Структура проекта

### Анализ сигналов (Части 1-6)
- `part1_combinational.v` - Комбинационная схема
- `part2_combinational.v` - Комбинационная схема
- `part3_combinational.v` - Комбинационная схема
- `part4_sequential.v` - Последовательная схема (D триггер)
- `part5_sequential.v` - Последовательная схема (JK триггер)
- `part6_sequential.v` - Последовательная схема с комбинационной логикой
- `signal_analysis_tb.v` - Testbench для всех частей анализа сигналов

### FSM Таймер (Части 1-4)
- `counter_0_999.v` - Счетчик от 0 до 999
- `counter_0_999_tb.v` - Testbench для счетчика
- `shift_register_counter.v` - 4-битный сдвиговый регистр с обратным счетом
- `shift_register_counter_tb.v` - Testbench для сдвигового регистра
- `pattern_detector_1101.v` - FSM для поиска последовательности 1101
- `pattern_detector_1101_tb.v` - Testbench для детектора паттерна
- `advanced_timer_v2.v` - Полный продвинутый таймер
- `advanced_timer_v2_tb.v` - Testbench для таймера

## Функциональность продвинутого таймера

Таймер работает по следующему алгоритму:
1. **Поиск паттерна**: Ищет последовательность `1101` во входном потоке битов
2. **Считывание задержки**: После обнаружения паттерна считывает 4 бита для определения длительности задержки
3. **Подсчет**: Отсчитывает количество тактов равное `(delay + 1) * 1000`
4. **Уведомление**: Устанавливает сигнал `done` после завершения отсчета
5. **Сброс**: После получения подтверждения (`ack`) возвращается в начальное состояние

## Компиляция и запуск

### Требования
- Icarus Verilog (iverilog)
- GTKWave (опционально, для просмотра временных диаграмм)

### Команды

```bash
# Компилировать и запустить все тесты
make all

# Компилировать и запустить только FSM тесты
make fsm

# Компилировать и запустить только тесты анализа сигналов
make signals

# Запустить отдельные тесты
make counter_0_999_tb
make shift_register_counter_tb
make pattern_detector_1101_tb
make advanced_timer_v2_tb
make signal_analysis_tb

# Очистить скомпилированные файлы
make clean

# Показать справку
make help
```

## Описание модулей

### Счетчик 0-999 (`counter_0_999.v`)
- Синхронный сброс
- Счет от 0 до 999 включительно
- Автоматический сброс при достижении 999

### Сдвиговый регистр с счетчиком (`shift_register_counter.v`)
- Сдвиг данных MSB first по сигналу `shift_ena`
- Обратный счет по сигналу `count_ena`
- 4-битная ширина данных

### Детектор паттерна (`pattern_detector_1101.v`)
- FSM с 5 состояниями
- Поиск последовательности `1101`
- Установка `start_shifting` при обнаружении паттерна

### Продвинутый таймер (`advanced_timer_v2.v`)
- Интегрированный детектор паттерна
- Сдвиговый регистр для задержки
- Основной таймер с настраиваемой задержкой
- Полный цикл работы с подтверждением

## Тестирование

Все модули содержат comprehensive testbench'и, которые проверяют:
- Корректность работы в нормальных условиях
- Граничные случаи
- Обработку ошибок
- Переходы между состояниями

## Временные диаграммы

Временные диаграммы для анализа находятся в папке `pic/`:
- `Part_1.png` - `Part_6.png` - Диаграммы для анализа сигналов
- `Part1.png` - `Part3.png` - Диаграммы для FSM частей
- `FSM_full.png` - Полная схема FSM
- `FSM_WF.png` - Временная диаграмма FSM
